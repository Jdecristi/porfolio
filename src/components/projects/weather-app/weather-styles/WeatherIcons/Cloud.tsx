import React, { createRef, useEffect } from 'react';

export interface CloudType {
    type: number;
    color: string;
    size: number;
    position: {x: number, y: number};
    zIndex: number;
}

interface Props {
    type: number;
    color: string;
    size: number;
    position: {x: number; y: number}
    zIndex: number;
}
const Cloud: React.FC <Props> = (props) => {
    const {type, color, size, position, zIndex} = props;

    const cloudRef = createRef<SVGSVGElement>();

    const parallax = (e: MouseEvent) => {
        const x = (e.pageX * zIndex) / -5000;
        const y = (e.pageY * zIndex) / -5000;
        
        if (cloudRef.current) cloudRef.current.style.transform = `translate(${x}em, ${y}em)`;
    }

    useEffect(() => {
        if (cloudRef.current) {
            cloudRef.current.style.left = `${position.x}em`
            cloudRef.current.style.top = `${position.y}em`
        }
    
        window.addEventListener('mousemove', parallax);

        return () => {
            window.removeEventListener('mousemove', parallax);
        }
    },)

    const clouds = [
        {
            viewBox: '0 0 333 187',
            aspectRatio: 187 / 333,
            path: `
                M134.358 0C109.796 0 85.3839 10.8135 68.0162 29.3833C57.0737 41.0828 49.0192 55.7714
                44.5523 71.6055C33.8158 73.7725 23.6758 79.3753 15.9441 87.6419C5.86652 98.4168 0 113.557 0
                128.795C0 144.033 5.86652 159.178 15.9441 169.953C26.0217 180.727 40.1863 187 54.4382 187H298.252C307.349
                187 316.392 182.998 322.824 176.121C329.257 169.243 333 159.574 333 149.848C333 140.121 329.257
                130.458 322.824 123.58C316.431 116.744 307.46 112.754 298.419 112.705C296.655 95.0824 289.188
                78.1202 277.458 65.5779C263.949 51.1349 244.964 42.7252 225.861 42.7252C221.223 42.7252 216.595
                43.2336 212.048 44.1909C208.72 38.8816 204.93 33.9059 200.7 29.3833C183.333 10.8135 158.92 0
                134.358 0V0Z
            `
        },

        {
            viewBox: '0 0 333 281',
            aspectRatio: 281 / 333,
            path: `
                M68.0162 29.3833C85.3839 10.8135 109.796 0 134.358 0C158.92 0 183.333 10.8135 200.7 29.3833C204.93
                33.9059 208.72 38.8816 212.048 44.1909C216.595 43.2337 221.223 42.7252 225.861 42.7252C244.964 42.7252
                263.949 51.1349 277.458 65.5779C285.607 74.2913 291.699 85.1379 295.25 96.8572C303.42 99.6924 310.981
                104.552 317.056 111.047C324.536 119.045 329.696 129.451 331.859 140.515C332.608 143.558 333 146.699
                333 149.848C333 150.197 332.995 150.546 332.986 150.895C332.995 151.332 333 151.768 333 152.205C333
                167.443 327.133 182.583 317.056 193.358C309.324 201.625 299.184 207.228 288.448 209.395C283.981 225.229
                275.926 239.917 264.984 251.617C247.616 270.186 223.204 281 198.642 281C174.08 281 149.667 270.186 132.3
                251.617C128.07 247.094 124.28 242.118 120.952 236.809C116.405 237.766 111.777 238.275 107.139 238.275C88.0356
                238.275 69.0506 229.865 55.5423 215.422C47.3929 206.709 41.3011 195.862 37.7497 184.143C29.58 181.308
                22.0194 176.448 15.9441 169.953C8.46377 161.955 3.30363 151.549 1.14068 140.485C0.392123 137.442 0
                134.301 0 131.152C0 130.803 0.00482503 130.454 0.0144263 130.105C0.00482179 129.668 0 129.232 0 128.795C0
                113.557 5.86652 98.4168 15.9441 87.6419C23.6758 79.3753 33.8158 73.7725 44.5523 71.6055C49.0192 55.7714
                57.0737 41.0828 68.0162 29.3833Z
            `
        },

        {
            viewBox: '0 0 108 93',
            aspectRatio: 93 / 108,
            path: `
                M16.1587 77.9754C20.5971 85.2696 27.7153 90.3465 35.503 91.7713C43.2908 93.196 51.6533 90.9512 58.2284
                85.6719C59.8299 84.3862 61.3177 82.9215 62.6782 81.317C64.065 81.9049 65.503 82.3455 66.9736 82.6145C73.0307
                83.7226 79.5341 81.9768 84.6481 77.8708C89.0891 74.305 92.4326 68.9957 94.0058 63.1319C96.875 63.6397 99.9492
                62.8092 102.369 60.8658C104.805 58.9106 106.548 55.8561 107.107 52.5632C107.224 51.8744 107.289 51.1768 107.304
                50.4797C107.419 49.7938 107.478 49.0974 107.478 48.4C107.478 45.2584 106.275 42.1371 104.208 39.9157C102.154
                37.7078 99.2712 36.4189 96.3664 36.4031C95.7995 30.7111 93.4002 25.2324 89.6309 21.1813C85.2904 16.5163 79.1901
                13.8 73.0517 13.8C71.5614 13.8 70.0744 13.9642 68.6132 14.2734C67.544 12.5585 66.3263 10.9514 64.9671 9.49062C59.3865
                3.49269 51.5422 -2.31934e-05 43.65 -2.31934e-05C35.7578 -2.31934e-05 27.9135 3.49269 22.3329 9.49062C18.8168
                13.2695 16.2287 18.0138 14.7934 23.1281C11.3436 23.8281 8.08537 25.6377 5.60101 28.3078C3.06496 31.0335 1.35887
                34.6239 0.738267 38.4171C0.567177 39.0616 0.424787 39.715 0.312708 40.3745C-0.564014 45.5333 0.424991 50.9992 3.00031
                55.2316C4.97616 58.4787 7.86885 60.9637 11.1484 62.3201C11.6537 67.9398 13.3624 73.3798 16.1587 77.9754Z
            `
        },

        {
            viewBox: '0 0 382 152',
            aspectRatio: 152 / 382,
            path: `
                M78.0245 133.257C97.9479 144.836 125.953 151.578 154.129 151.578C182.305 151.578 210.309 144.836 230.233 133.257C235.085
                130.437 239.432 127.335 243.25 124.024C248.466 124.621 253.775 124.938 259.096 124.938C281.01 124.938 302.789 119.695
                318.285 110.689C331.741 102.869 340.307 92.2924 342.331 81.3043C352.701 81.2737 362.993 78.7856 370.327 74.5235C377.706
                70.2352 382 64.2098 382 58.1451C382 52.0804 377.706 46.0517 370.327 41.7634C362.948 37.4753 352.574 34.9799 342.139
                34.9799H334.537C330.594 29.2828 322.904 24.1763 312.301 20.4209C296.824 14.9388 275.342 12.4003 253.918 13.5231C248.717
                13.7957 243.538 14.2886 238.461 14.9718C234.608 12.8603 230.245 10.9209 225.398 9.2043C205.498 2.15587 177.875 -1.1082
                150.33 0.335373C122.785 1.77892 95.654 7.91255 76.5999 17.0025C65.2857 22.3999 56.9086 28.8003 52.0905 35.4985C39.4098
                36.7676 27.3957 40.3177 18.2902 45.6093C16.7101 46.5276 15.2203 47.4967 13.8255 48.51C8.46645 51.909 4.86181 55.7448
                3.36115 59.6298C1.16604 63.3723 0 67.3171 0 71.2721C0 80.7733 6.72975 90.2133 18.2902 96.9317C27.1596 102.086 38.7916
                105.58 51.108 106.931C56.2322 116.804 65.4719 125.962 78.0245 133.257Z
            `
        },
    ]
    

    return (
        <>
            <svg className="cloud" viewBox={clouds[type].viewBox} ref={cloudRef}>
                <path d={clouds[type].path} fill={color} />
            </svg>

            <style jsx>
                {`
                    .cloud {
                        position: absolute;
                        width: ${size}em;
                        height: ${size * (clouds[type].aspectRatio)}em;
                        transition: translate .5s ease-in-out;
                        z-index: ${zIndex};
                    }
                `}
            </style>
        </>
    )
}
export default Cloud;